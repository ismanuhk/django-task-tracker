<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Tracker</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f4f6f9;
        }
        .task-card {
            transition: 0.2s;
        }
        .task-card:hover {
            transform: scale(1.01);
        }
        .completed {
            text-decoration: line-through;
            color: gray;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-dark bg-dark px-4">
    <span class="navbar-brand">ğŸ“ Task Tracker</span>
    <form method="post" action="{% url 'logout' %}" class="d-inline">
    {% csrf_token %}
    <button type="submit" class="btn btn-outline-light btn-sm">
        Logout
    </button>
</form>

</nav>

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>My Tasks</h4>
        <a href="{% url 'add_task' %}" class="btn btn-primary">+ Add Task</a>
    </div>

    {% if tasks %}
        <div class="list-group">
            {% for task in tasks %}
            <div class="list-group-item task-card d-flex justify-content-between align-items-center">
                
                <div>
                    <h6 class="{% if task.completed %}completed{% endif %}">
                        {{ task.title }}
                    </h6>
                    <small class="text-muted">
                        Created: {{ task.created_at|date:"d M Y, h:i A" }}
                    </small>
                </div>

                <div>
                    <a href="{% url 'toggle_task' task.id %}"
                       class="btn btn-sm {% if task.completed %}btn-warning{% else %}btn-success{% endif %}">
                        {% if task.completed %}Undo{% else %}Done{% endif %}
                    </a>

                    <a href="{% url 'delete_task' task.id %}"
                       class="btn btn-sm btn-danger"
                       onclick="return confirm('Delete this task?')">
                        Delete
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center">
            No tasks yet. Click <b>Add Task</b> to start ğŸš€
        </div>
    {% endif %}

</div>

</body>
</html>
